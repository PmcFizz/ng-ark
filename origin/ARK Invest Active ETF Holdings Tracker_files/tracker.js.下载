!function(){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function U(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e,n){return(s=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}}()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var s=new(Function.bind.apply(t,i));return n&&r(s,n.prototype),s}).apply(null,arguments)}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,s=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(i=(o=a.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){s=!0,r=t}finally{try{i||null==a.return||a.return()}finally{if(s)throw r}}return n}(t,e)||c(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){if(t){if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,e):void 0}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function H(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=c(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s,r=!0,o=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return r=t.done,t},e:function(t){o=!0,s=t},f:function(){try{r||null==i.return||i.return()}finally{if(o)throw s}}}}function B(){return Math.round(performance.now())+performance.timing.navigationStart}var d="repeat"in String.prototype?function(t){return"*".repeat(t.length)}:function(t){return t.replace(/./g,"*")};function l(t){return t.trim().replace(/\s+/g," ")}function F(t){return"https://"===t.substr(0,8)||"http://"===t.substr(0,7)}var J=!("undefined"==typeof window);function t(i){function t(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return s(i,e)}return t.prototype=i.prototype,t}var e=new Map,n=t(function(){function e(t){U(this,e),this.timestamp=t,this._id=0}return o(e,[{key:"encode",value:function(t){t.uint(0),t.uint(this.timestamp)}}]),e}());e.set(0,n);var W=t(function(){function i(t,e,n){U(this,i),this.url=t,this.referrer=e,this.navigationStart=n,this._id=4}return o(i,[{key:"encode",value:function(t){t.uint(4),t.string(this.url),t.string(this.referrer),t.uint(this.navigationStart)}}]),i}());e.set(4,W);var Y=t(function(){function n(t,e){U(this,n),this.width=t,this.height=e,this._id=5}return o(n,[{key:"encode",value:function(t){t.uint(5),t.uint(this.width),t.uint(this.height)}}]),n}());e.set(5,Y);var V=t(function(){function n(t,e){U(this,n),this.x=t,this.y=e,this._id=6}return o(n,[{key:"encode",value:function(t){t.uint(6),t.int(this.x),t.int(this.y)}}]),n}());e.set(6,V);var f=t(function(){function t(){U(this,t),this._id=7}return o(t,[{key:"encode",value:function(t){t.uint(7)}}]),t}());e.set(7,f);var p=t(function(){function r(t,e,n,i,s){U(this,r),this.id=t,this.parentID=e,this.index=n,this.tag=i,this.svg=s,this._id=8}return o(r,[{key:"encode",value:function(t){t.uint(8),t.uint(this.id),t.uint(this.parentID),t.uint(this.index),t.string(this.tag),t.boolean(this.svg)}}]),r}());e.set(8,p);var v=t(function(){function i(t,e,n){U(this,i),this.id=t,this.parentID=e,this.index=n,this._id=9}return o(i,[{key:"encode",value:function(t){t.uint(9),t.uint(this.id),t.uint(this.parentID),t.uint(this.index)}}]),i}());e.set(9,v);var m=t(function(){function i(t,e,n){U(this,i),this.id=t,this.parentID=e,this.index=n,this._id=10}return o(i,[{key:"encode",value:function(t){t.uint(10),t.uint(this.id),t.uint(this.parentID),t.uint(this.index)}}]),i}());e.set(10,m);var g=t(function(){function e(t){U(this,e),this.id=t,this._id=11}return o(e,[{key:"encode",value:function(t){t.uint(11),t.uint(this.id)}}]),e}());e.set(11,g);var y=t(function(){function i(t,e,n){U(this,i),this.id=t,this.name=e,this.value=n,this._id=12}return o(i,[{key:"encode",value:function(t){t.uint(12),t.uint(this.id),t.string(this.name),t.string(this.value)}}]),i}());e.set(12,y);var b=t(function(){function n(t,e){U(this,n),this.id=t,this.name=e,this._id=13}return o(n,[{key:"encode",value:function(t){t.uint(13),t.uint(this.id),t.string(this.name)}}]),n}());e.set(13,b);var k=t(function(){function n(t,e){U(this,n),this.id=t,this.data=e,this._id=14}return o(n,[{key:"encode",value:function(t){t.uint(14),t.uint(this.id),t.string(this.data)}}]),n}());e.set(14,k);var q=t(function(){function i(t,e,n){U(this,i),this.id=t,this.x=e,this.y=n,this._id=16}return o(i,[{key:"encode",value:function(t){t.uint(16),t.uint(this.id),t.int(this.x),t.int(this.y)}}]),i}());e.set(16,q);var w=t(function(){function n(t,e){U(this,n),this.id=t,this.label=e,this._id=17}return o(n,[{key:"encode",value:function(t){t.uint(17),t.uint(this.id),t.string(this.label)}}]),n}());e.set(17,w);var S=t(function(){function i(t,e,n){U(this,i),this.id=t,this.value=e,this.mask=n,this._id=18}return o(i,[{key:"encode",value:function(t){t.uint(18),t.uint(this.id),t.string(this.value),t.int(this.mask)}}]),i}());e.set(18,S);var E=t(function(){function n(t,e){U(this,n),this.id=t,this.checked=e,this._id=19}return o(n,[{key:"encode",value:function(t){t.uint(19),t.uint(this.id),t.boolean(this.checked)}}]),n}());e.set(19,E);var _=t(function(){function n(t,e){U(this,n),this.x=t,this.y=e,this._id=20}return o(n,[{key:"encode",value:function(t){t.uint(20),t.uint(this.x),t.uint(this.y)}}]),n}());e.set(20,_);var N=t(function(){function i(t,e,n){U(this,i),this.id=t,this.hesitationTime=e,this.label=n,this._id=21}return o(i,[{key:"encode",value:function(t){t.uint(21),t.uint(this.id),t.uint(this.hesitationTime),t.string(this.label)}}]),i}());e.set(21,N);var X=t(function(){function n(t,e){U(this,n),this.level=t,this.value=e,this._id=22}return o(n,[{key:"encode",value:function(t){t.uint(22),t.string(this.level),t.string(this.value)}}]),n}());e.set(22,X);var I=t(function(){function c(t,e,n,i,s,r,o,a,u){U(this,c),this.requestStart=t,this.responseStart=e,this.responseEnd=n,this.domContentLoadedEventStart=i,this.domContentLoadedEventEnd=s,this.loadEventStart=r,this.loadEventEnd=o,this.firstPaint=a,this.firstContentfulPaint=u,this._id=23}return o(c,[{key:"encode",value:function(t){t.uint(23),t.uint(this.requestStart),t.uint(this.responseStart),t.uint(this.responseEnd),t.uint(this.domContentLoadedEventStart),t.uint(this.domContentLoadedEventEnd),t.uint(this.loadEventStart),t.uint(this.loadEventEnd),t.uint(this.firstPaint),t.uint(this.firstContentfulPaint)}}]),c}());e.set(23,I);var x=t(function(){function i(t,e,n){U(this,i),this.speedIndex=t,this.visuallyComplete=e,this.timeToInteractive=n,this._id=24}return o(i,[{key:"encode",value:function(t){t.uint(24),t.uint(this.speedIndex),t.uint(this.visuallyComplete),t.uint(this.timeToInteractive)}}]),i}());e.set(24,x);var T=t(function(){function i(t,e,n){U(this,i),this.name=t,this.message=e,this.payload=n,this._id=25}return o(i,[{key:"encode",value:function(t){t.uint(25),t.string(this.name),t.string(this.message),t.string(this.payload)}}]),i}());e.set(25,T);var L=t(function(){function n(t,e){U(this,n),this.name=t,this.payload=e,this._id=27}return o(n,[{key:"encode",value:function(t){t.uint(27),t.string(this.name),t.string(this.payload)}}]),n}());e.set(27,L);var A=t(function(){function e(t){U(this,e),this.id=t,this._id=28}return o(e,[{key:"encode",value:function(t){t.uint(28),t.string(this.id)}}]),e}());e.set(28,A);var C=t(function(){function e(t){U(this,e),this.id=t,this._id=29}return o(e,[{key:"encode",value:function(t){t.uint(29),t.string(this.id)}}]),e}());e.set(29,C);var O=t(function(){function n(t,e){U(this,n),this.key=t,this.value=e,this._id=30}return o(n,[{key:"encode",value:function(t){t.uint(30),t.string(this.key),t.string(this.value)}}]),n}());e.set(30,O);var D=t(function(){function i(t,e,n){U(this,i),this.id=t,this.rule=e,this.index=n,this._id=37}return o(i,[{key:"encode",value:function(t){t.uint(37),t.uint(this.id),t.string(this.rule),t.uint(this.index)}}]),i}());e.set(37,D);var M=t(function(){function n(t,e){U(this,n),this.id=t,this.index=e,this._id=38}return o(n,[{key:"encode",value:function(t){t.uint(38),t.uint(this.id),t.uint(this.index)}}]),n}());e.set(38,M);var R=t(function(){function a(t,e,n,i,s,r,o){U(this,a),this.method=t,this.url=e,this.request=n,this.response=i,this.status=s,this.timestamp=r,this.duration=o,this._id=39}return o(a,[{key:"encode",value:function(t){t.uint(39),t.string(this.method),t.string(this.url),t.string(this.request),t.string(this.response),t.uint(this.status),t.uint(this.timestamp),t.uint(this.duration)}}]),a}());e.set(39,R);var j=t(function(){function s(t,e,n,i){U(this,s),this.name=t,this.duration=e,this.args=n,this.result=i,this._id=40}return o(s,[{key:"encode",value:function(t){t.uint(40),t.string(this.name),t.uint(this.duration),t.string(this.args),t.string(this.result)}}]),s}());e.set(40,j);var P=t(function(){function n(t,e){U(this,n),this.key=t,this.value=e,this._id=41}return o(n,[{key:"encode",value:function(t){t.uint(41),t.string(this.key),t.string(this.value)}}]),n}());e.set(41,P);var z=t(function(){function e(t){U(this,e),this.type=t,this._id=42}return o(e,[{key:"encode",value:function(t){t.uint(42),t.string(this.type)}}]),e}());e.set(42,z);var $=t(function(){function i(t,e,n){U(this,i),this.action=t,this.state=e,this.duration=n,this._id=44}return o(i,[{key:"encode",value:function(t){t.uint(44),t.string(this.action),t.string(this.state),t.uint(this.duration)}}]),i}());e.set(44,$);var G=t(function(){function n(t,e){U(this,n),this.mutation=t,this.state=e,this._id=45}return o(n,[{key:"encode",value:function(t){t.uint(45),t.string(this.mutation),t.string(this.state)}}]),n}());e.set(45,G);var K=t(function(){function n(t,e){U(this,n),this.type=t,this.payload=e,this._id=46}return o(n,[{key:"encode",value:function(t){t.uint(46),t.string(this.type),t.string(this.payload)}}]),n}());e.set(46,K);var Q=t(function(){function i(t,e,n){U(this,i),this.action=t,this.state=e,this.duration=n,this._id=47}return o(i,[{key:"encode",value:function(t){t.uint(47),t.string(this.action),t.string(this.state),t.uint(this.duration)}}]),i}());e.set(47,Q);var Z=t(function(){function s(t,e,n,i){U(this,s),this.operationKind=t,this.operationName=e,this.variables=n,this.response=i,this._id=48}return o(s,[{key:"encode",value:function(t){t.uint(48),t.string(this.operationKind),t.string(this.operationName),t.string(this.variables),t.string(this.response)}}]),s}());e.set(48,Z);var tt=t(function(){function s(t,e,n,i){U(this,s),this.frames=t,this.ticks=e,this.totalJSHeapSize=n,this.usedJSHeapSize=i,this._id=49}return o(s,[{key:"encode",value:function(t){t.uint(49),t.int(this.frames),t.int(this.ticks),t.uint(this.totalJSHeapSize),t.uint(this.usedJSHeapSize)}}]),s}());e.set(49,tt);var et=t(function(){function u(t,e,n,i,s,r,o,a){U(this,u),this.timestamp=t,this.duration=e,this.ttfb=n,this.headerSize=i,this.encodedBodySize=s,this.decodedBodySize=r,this.url=o,this.initiator=a,this._id=53}return o(u,[{key:"encode",value:function(t){t.uint(53),t.uint(this.timestamp),t.uint(this.duration),t.uint(this.ttfb),t.uint(this.headerSize),t.uint(this.encodedBodySize),t.uint(this.decodedBodySize),t.string(this.url),t.string(this.initiator)}}]),u}());e.set(53,et);var nt=t(function(){function n(t,e){U(this,n),this.downlink=t,this.type=e,this._id=54}return o(n,[{key:"encode",value:function(t){t.uint(54),t.uint(this.downlink),t.string(this.type)}}]),n}());e.set(54,nt);var it=t(function(){function e(t){U(this,e),this.hidden=t,this._id=55}return o(e,[{key:"encode",value:function(t){t.uint(55),t.boolean(this.hidden)}}]),e}());e.set(55,it);var st=t(function(){function a(t,e,n,i,s,r,o){U(this,a),this.timestamp=t,this.duration=e,this.context=n,this.containerType=i,this.containerSrc=s,this.containerId=r,this.containerName=o,this._id=59}return o(a,[{key:"encode",value:function(t){t.uint(59),t.uint(this.timestamp),t.uint(this.duration),t.uint(this.context),t.uint(this.containerType),t.string(this.containerSrc),t.string(this.containerId),t.string(this.containerName)}}]),a}());e.set(59,st);var rt=t(function(){function s(t,e,n,i){U(this,s),this.id=t,this.name=e,this.value=n,this.baseURL=i,this._id=60}return o(s,[{key:"encode",value:function(t){t.uint(60),t.uint(this.id),t.string(this.name),t.string(this.value),t.string(this.baseURL)}}]),s}());e.set(60,rt);var ot=t(function(){function i(t,e,n){U(this,i),this.id=t,this.data=e,this.baseURL=n,this._id=61}return o(i,[{key:"encode",value:function(t){t.uint(61),t.uint(this.id),t.string(this.data),t.string(this.baseURL)}}]),i}());e.set(61,ot);var at=t(function(){function n(t,e){U(this,n),this.type=t,this.value=e,this._id=63}return o(n,[{key:"encode",value:function(t){t.uint(63),t.string(this.type),t.string(this.value)}}]),n}());e.set(63,at);var ut=t(function(){function n(t,e){U(this,n),this.name=t,this.payload=e,this._id=64}return o(n,[{key:"encode",value:function(t){t.uint(64),t.string(this.name),t.string(this.payload)}}]),n}());e.set(64,ut);var ct=t(function(){function t(){U(this,t),this._id=65}return o(t,[{key:"encode",value:function(t){t.uint(65)}}]),t}());e.set(65,ct);var ht=Object.freeze({__proto__:null,classes:e,Timestamp:n,SetPageLocation:W,SetViewportSize:Y,SetViewportScroll:V,CreateDocument:f,CreateElementNode:p,CreateTextNode:v,MoveNode:m,RemoveNode:g,SetNodeAttribute:y,RemoveNodeAttribute:b,SetNodeData:k,SetNodeScroll:q,SetInputTarget:w,SetInputValue:S,SetInputChecked:E,MouseMove:_,MouseClick:N,ConsoleLog:X,PageLoadTiming:I,PageRenderTiming:x,JSException:T,RawCustomEvent:L,UserID:A,UserAnonymousID:C,Metadata:O,CSSInsertRule:D,CSSDeleteRule:M,Fetch:R,Profiler:j,OTable:P,StateAction:z,Redux:$,Vuex:G,MobX:K,NgRx:Q,GraphQL:Z,PerformanceTrack:tt,ResourceTiming:et,ConnectionInformation:nt,SetPageVisibility:it,LongTask:st,SetNodeURLBasedAttribute:rt,SetStyleData:ot,TechnicalInfo:at,CustomIssue:ut,PageClose:ct}),dt=function(){function e(t){U(this,e),this.node_id=t,this.nodes=[],this.nodeCallbacks=[],this.elementListeners=new Map}return o(e,[{key:"attachNodeCallback",value:function(t){this.nodeCallbacks.push(t)}},{key:"attachElementListener",value:function(t,e,n){var i=this.getID(e);if(void 0!==i){e.addEventListener(t,n);var s=this.elementListeners.get(i);if(void 0===s)return s=[],void this.elementListeners.set(i,s);s.push([t,n])}}},{key:"registerNode",value:function(t){var e=t[this.node_id],n=void 0===e;return n&&(e=this.nodes.length,(this.nodes[e]=t)[this.node_id]=e),[e,n]}},{key:"unregisterNode",value:function(e){var t,n=e[this.node_id];return void 0!==n&&(delete e[this.node_id],(this.nodes[n]=void 0)!==(t=this.elementListeners.get(n))&&(this.elementListeners.delete(n),t.forEach(function(t){return e.removeEventListener(t[0],t[1])}))),n}},{key:"callNodeCallbacks",value:function(e){this.nodeCallbacks.forEach(function(t){return t(e)})}},{key:"getID",value:function(t){return t[this.node_id]}},{key:"getNode",value:function(t){return this.nodes[t]}},{key:"clear",value:function(){for(var t=0;t<this.nodes.length;t++){var e=this.nodes[t];void 0!==e&&this.unregisterNode(e)}this.nodes.length=0}}]),e}();function lt(t){return"http://www.w3.org/2000/svg"===t.namespaceURI}function ft(t){if(!(t instanceof Text)){if(!(t instanceof Element))return 1;var e=t.tagName.toUpperCase();if("LINK"!==e)return"SCRIPT"===e||"NOSCRIPT"===e||"META"===e||"TITLE"===e||"BASE"===e;var n=t.getAttribute("rel");return"style"!==t.getAttribute("as")&&(null==n||!n.includes("stylesheet"))}}var pt=function(){function n(t,e){var d=this;U(this,n),this.app=t,this.options=e,this.observer=new MutationObserver(this.app.safe(function(t){var e,n=H(t);try{for(n.s();!(e=n.n()).done;){var i=e.value,s=i.target;if(!ft(s)&&document.contains(s)){var r=i.type;if("childList"!==r){var o=d.app.nodes.getID(s);if(void 0!==o)if(o>=d.recents.length&&(d.recents[o]=void 0),"attributes"!==r)"characterData"!==r||d.textSet.add(o);else{var a=i.attributeName;if(null===a)continue;var u=d.attributesList[o];void 0===u&&(d.attributesList[o]=u=new Set),u.add(a)}}else{for(var c=0;c<i.removedNodes.length;c++)d.bindTree(i.removedNodes[c]);for(var h=0;h<i.addedNodes.length;h++)d.bindTree(i.addedNodes[h])}}}}catch(t){n.e(t)}finally{n.f()}d.commitNodes()})),this.commited=[],this.recents=[],this.indexes=[0],this.attributesList=[],this.textSet=new Set,this.textMasked=new Set}return o(n,[{key:"clear",value:function(){this.commited.length=0,this.recents.length=0,this.indexes.length=1,this.attributesList.length=0,this.textSet.clear(),this.textMasked.clear()}},{key:"sendNodeAttribute",value:function(t,e,n,i){if(lt(e))return"xlink:"===n.substr(0,6)&&(n=n.substr(6)),void(null===i?this.app.send(new b(t,n)):this.app.send(new y(t,n,i)));var s;"src"!==n&&"srcset"!==n&&"integrity"!==n&&"crossorigin"!==n&&"autocomplete"!==n&&"on"!==n.substr(0,2)&&("value"===n&&e instanceof HTMLInputElement&&"button"!==e.type&&"reset"!==e.type&&"submit"!==e.type||(null!==i?"style"===n||"href"===n&&e instanceof HTMLLinkElement?(s=location.origin+location.pathname,this.app.send(rt(t,n,i,s))):(("href"===n||1e5<i.length)&&(i=""),this.app.send(new y(t,n,i))):this.app.send(new b(t,n))))}},{key:"sendNodeData",value:function(t,e,n){var i;e instanceof HTMLStyleElement||e instanceof SVGStyleElement?(i=location.origin+location.pathname,this.app.send(ot(t,n,i))):(this.textMasked.has(t)?n=n.replace(/[^\f\n\r\t\v\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]/g,"â–ˆ"):(this.options.obscureTextNumbers&&(n=n.replace(/\d/g,"0")),this.options.obscureTextEmails&&(n=n.replace(/([^\s]+)@([^\s]+)\.([^\s]+)/g,function(){return d(arguments.length<=1?void 0:arguments[1])+"@"+d(arguments.length<=2?void 0:arguments[2])+"."+d(arguments.length<=3?void 0:arguments[3])}))),this.app.send(new k(t,n)))}},{key:"bindNode",value:function(t){var e=this.app.nodes.registerNode(t),n=e[0];this.recents[n]=e[1]||this.recents[n]||!1}},{key:"bindTree",value:function(t){var e=this;if(!ft(t)){this.bindNode(t);for(var n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT+NodeFilter.SHOW_TEXT,{acceptNode:function(t){return ft(t)||void 0!==e.app.nodes.getID(t)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}},!1);n.nextNode();)this.bindNode(n.currentNode)}}},{key:"unbindNode",value:function(t){var e=this.app.nodes.unregisterNode(t);void 0!==e&&!1===this.recents[e]&&this.app.send(new g(e))}},{key:"_commitNode",value:function(t,e){var n,i=e.parentNode;if(0!==t){if(null===i)return this.unbindNode(e),!1;if(void 0===(n=this.app.nodes.getID(i)))return this.unbindNode(e),!1;if(!this.commitNode(n))return this.unbindNode(e),!1;(this.textMasked.has(n)||e instanceof Element&&e.hasAttribute("data-asayer-masked"))&&this.textMasked.add(t);for(var s=e.previousSibling;null!==s;){var r=this.app.nodes.getID(s);if(void 0!==r){this.commitNode(r),this.indexes[t]=this.indexes[r]+1;break}s=s.previousSibling}null===s&&(this.indexes[t]=0)}var o=this.recents[t],a=this.indexes[t];if(void 0===a)throw"commitNode: missing node index";if(!0===o){if(e instanceof Element){void 0!==n&&this.app.send(new p(t,n,a,e.tagName,lt(e)));for(var u=0;u<e.attributes.length;u++){var c=e.attributes[u];this.sendNodeAttribute(t,e,c.nodeName,c.value)}}else e instanceof Text&&(this.app.send(new v(t,n,a)),this.sendNodeData(t,i,e.data));return!0}!1===o&&void 0!==n&&this.app.send(new m(t,n,a));var h=this.attributesList[t];if(void 0!==h){if(!(e instanceof Element))throw"commitNode: node is not an element";var d,l=H(h);try{for(l.s();!(d=l.n()).done;){var f=d.value;this.sendNodeAttribute(t,e,f,e.getAttribute(f))}}catch(t){l.e(t)}finally{l.f()}}if(this.textSet.has(t)){if(!(e instanceof Text))throw"commitNode: node is not a text";this.sendNodeData(t,i,e.data)}return!0}},{key:"commitNode",value:function(t){var e=this.app.nodes.getNode(t);if(void 0===e)return!1;var n=this.commited[t];return void 0!==n?n:this.commited[t]=this._commitNode(t,e)}},{key:"commitNodes",value:function(){for(var t,e=0;e<this.recents.length;e++)this.commitNode(e),!0===this.recents[e]&&(t=this.app.nodes.getNode(e))&&this.app.nodes.callNodeCallbacks(t);this.clear()}},{key:"observe",value:function(){this.observer.observe(document,{childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!1,characterDataOldValue:!1}),this.app.send(new f),this.bindTree(document.documentElement),this.commitNodes()}},{key:"disconnect",value:function(){this.observer.disconnect(),this.clear()}}]),n}();var vt=function(){function e(t){U(this,e),this.app=t,this.timer=null,this.callbacks=[]}return o(e,[{key:"attach",value:function(t,e,n,i){var s,r,o,a=1<arguments.length&&void 0!==e?e:0,u=!(2<arguments.length&&void 0!==n)||n,c=3<arguments.length?i:void 0;c&&(t=t.bind(c)),u&&(t=this.app.safe(t)),this.callbacks.unshift(a?(s=t,r=a,o=0,function(){o++>=r&&(o=0,s())}):t)}},{key:"start",value:function(){var t=this;null===this.timer&&(this.timer=setInterval(function(){return t.callbacks.forEach(function(t){t&&t()})},30))}},{key:"stop",value:function(){null!==this.timer&&(clearInterval(this.timer),this.timer=null)}}]),e}(),mt=J&&"memory"in performance?performance:{memory:{}},gt=J?1024*(navigator.deviceMemory||0):0,yt=mt.memory.jsHeapSizeLimit||0;function bt(t){var e,n;t.ticker.attach(function(){void 0!==n&&-1!==n&&n++},0,!1);function i(){void 0!==e&&void 0!==n&&(t.send(new tt(e,n,mt.memory.totalJSHeapSize||0,mt.memory.usedJSHeapSize||0)),n=e=document.hidden?-1:0)}t.attachStartCallback(function(){n=e=-1,i(),function t(){void 0!==e&&-1!==e&&(e++,requestAnimationFrame(t))}()}),t.attachStopCallback(function(){n=e=void 0}),t.ticker.attach(i,40,!1),void 0!==document.hidden&&t.attachEventListener(document,"visibilitychange",i,!1,!1)}var kt=function(){function i(t,e,n){var r=this;U(this,i),this.messages=[],this.socketFailedAttempts=0,this.isActive=!1,this.isWorkerActive=!1,this.version="5.6.6",this.projectID=t,this.options=Object.assign({revID:"",node_id:"__asayer_id",session_sid:"__asayer_sid",local_uuid:"__asayer_uuid",ws_url:"wss://ws.asayer.io/",__is_snippet:!1,obscureTextEmails:!0,obscureTextNumbers:!1},n),null!=e&&sessionStorage.setItem(this.options.session_sid,e),this.revID=this.options.revID,this.nodes=new dt(this.options.node_id),this.observer=new pt(this,this.options),this.ticker=new vt(this),this.ticker.attach(function(){return r.commit()}),this.startCallbacks=[],this.stopCallbacks=[];try{this.worker=new Worker(URL.createObjectURL(new Blob(['"use strict";function t(t){function s(...s){return new t(...s)}return s.prototype=t.prototype,s}const s=new Map;const i=t(class{constructor(t){this.timestamp=t,this._id=0}encode(t){t.uint(0),t.uint(this.timestamp)}});s.set(0,i);const n=t(class{constructor(t,s,i){this.url=t,this.referrer=s,this.navigationStart=i,this._id=4}encode(t){t.uint(4),t.string(this.url),t.string(this.referrer),t.uint(this.navigationStart)}});s.set(4,n);const e=t(class{constructor(t,s){this.width=t,this.height=s,this._id=5}encode(t){t.uint(5),t.uint(this.width),t.uint(this.height)}});s.set(5,e);const h=t(class{constructor(t,s){this.x=t,this.y=s,this._id=6}encode(t){t.uint(6),t.int(this.x),t.int(this.y)}});s.set(6,h);const o=t(class{constructor(){this._id=7}encode(t){t.uint(7)}});s.set(7,o);const r=t(class{constructor(t,s,i,n,e){this.id=t,this.parentID=s,this.index=i,this.tag=n,this.svg=e,this._id=8}encode(t){t.uint(8),t.uint(this.id),t.uint(this.parentID),t.uint(this.index),t.string(this.tag),t.boolean(this.svg)}});s.set(8,r);const c=t(class{constructor(t,s,i){this.id=t,this.parentID=s,this.index=i,this._id=9}encode(t){t.uint(9),t.uint(this.id),t.uint(this.parentID),t.uint(this.index)}});s.set(9,c);const a=t(class{constructor(t,s,i){this.id=t,this.parentID=s,this.index=i,this._id=10}encode(t){t.uint(10),t.uint(this.id),t.uint(this.parentID),t.uint(this.index)}});s.set(10,a);const d=t(class{constructor(t){this.id=t,this._id=11}encode(t){t.uint(11),t.uint(this.id)}});s.set(11,d);const u=t(class{constructor(t,s,i){this.id=t,this.name=s,this.value=i,this._id=12}encode(t){t.uint(12),t.uint(this.id),t.string(this.name),t.string(this.value)}});s.set(12,u);const l=t(class{constructor(t,s){this.id=t,this.name=s,this._id=13}encode(t){t.uint(13),t.uint(this.id),t.string(this.name)}});s.set(13,l);const g=t(class{constructor(t,s){this.id=t,this.data=s,this._id=14}encode(t){t.uint(14),t.uint(this.id),t.string(this.data)}});s.set(14,g);const p=t(class{constructor(t,s,i){this.id=t,this.x=s,this.y=i,this._id=16}encode(t){t.uint(16),t.uint(this.id),t.int(this.x),t.int(this.y)}});s.set(16,p);const f=t(class{constructor(t,s){this.id=t,this.label=s,this._id=17}encode(t){t.uint(17),t.uint(this.id),t.string(this.label)}});s.set(17,f);const m=t(class{constructor(t,s,i){this.id=t,this.value=s,this.mask=i,this._id=18}encode(t){t.uint(18),t.uint(this.id),t.string(this.value),t.int(this.mask)}});s.set(18,m);const _=t(class{constructor(t,s){this.id=t,this.checked=s,this._id=19}encode(t){t.uint(19),t.uint(this.id),t.boolean(this.checked)}});s.set(19,_);const y=t(class{constructor(t,s){this.x=t,this.y=s,this._id=20}encode(t){t.uint(20),t.uint(this.x),t.uint(this.y)}});s.set(20,y);const v=t(class{constructor(t,s,i){this.id=t,this.hesitationTime=s,this.label=i,this._id=21}encode(t){t.uint(21),t.uint(this.id),t.uint(this.hesitationTime),t.string(this.label)}});s.set(21,v);const S=t(class{constructor(t,s){this.level=t,this.value=s,this._id=22}encode(t){t.uint(22),t.string(this.level),t.string(this.value)}});s.set(22,S);const b=t(class{constructor(t,s,i,n,e,h,o,r,c){this.requestStart=t,this.responseStart=s,this.responseEnd=i,this.domContentLoadedEventStart=n,this.domContentLoadedEventEnd=e,this.loadEventStart=h,this.loadEventEnd=o,this.firstPaint=r,this.firstContentfulPaint=c,this._id=23}encode(t){t.uint(23),t.uint(this.requestStart),t.uint(this.responseStart),t.uint(this.responseEnd),t.uint(this.domContentLoadedEventStart),t.uint(this.domContentLoadedEventEnd),t.uint(this.loadEventStart),t.uint(this.loadEventEnd),t.uint(this.firstPaint),t.uint(this.firstContentfulPaint)}});s.set(23,b);const x=t(class{constructor(t,s,i){this.speedIndex=t,this.visuallyComplete=s,this.timeToInteractive=i,this._id=24}encode(t){t.uint(24),t.uint(this.speedIndex),t.uint(this.visuallyComplete),t.uint(this.timeToInteractive)}});s.set(24,x);const E=t(class{constructor(t,s,i){this.name=t,this.message=s,this.payload=i,this._id=25}encode(t){t.uint(25),t.string(this.name),t.string(this.message),t.string(this.payload)}});s.set(25,E);const w=t(class{constructor(t,s){this.name=t,this.payload=s,this._id=27}encode(t){t.uint(27),t.string(this.name),t.string(this.payload)}});s.set(27,w);const k=t(class{constructor(t){this.id=t,this._id=28}encode(t){t.uint(28),t.string(this.id)}});s.set(28,k);const z=t(class{constructor(t){this.id=t,this._id=29}encode(t){t.uint(29),t.string(this.id)}});s.set(29,z);const I=t(class{constructor(t,s){this.key=t,this.value=s,this._id=30}encode(t){t.uint(30),t.string(this.key),t.string(this.value)}});s.set(30,I);const C=t(class{constructor(t,s,i){this.id=t,this.rule=s,this.index=i,this._id=37}encode(t){t.uint(37),t.uint(this.id),t.string(this.rule),t.uint(this.index)}});s.set(37,C);const L=t(class{constructor(t,s){this.id=t,this.index=s,this._id=38}encode(t){t.uint(38),t.uint(this.id),t.uint(this.index)}});s.set(38,L);const T=t(class{constructor(t,s,i,n,e,h,o){this.method=t,this.url=s,this.request=i,this.response=n,this.status=e,this.timestamp=h,this.duration=o,this._id=39}encode(t){t.uint(39),t.string(this.method),t.string(this.url),t.string(this.request),t.string(this.response),t.uint(this.status),t.uint(this.timestamp),t.uint(this.duration)}});s.set(39,T);const U=t(class{constructor(t,s,i,n){this.name=t,this.duration=s,this.args=i,this.result=n,this._id=40}encode(t){t.uint(40),t.string(this.name),t.uint(this.duration),t.string(this.args),t.string(this.result)}});s.set(40,U);const D=t(class{constructor(t,s){this.key=t,this.value=s,this._id=41}encode(t){t.uint(41),t.string(this.key),t.string(this.value)}});s.set(41,D);const M=t(class{constructor(t){this.type=t,this._id=42}encode(t){t.uint(42),t.string(this.type)}});s.set(42,M);const R=t(class{constructor(t,s,i){this.action=t,this.state=s,this.duration=i,this._id=44}encode(t){t.uint(44),t.string(this.action),t.string(this.state),t.uint(this.duration)}});s.set(44,R);const A=t(class{constructor(t,s){this.mutation=t,this.state=s,this._id=45}encode(t){t.uint(45),t.string(this.mutation),t.string(this.state)}});s.set(45,A);const N=t(class{constructor(t,s){this.type=t,this.payload=s,this._id=46}encode(t){t.uint(46),t.string(this.type),t.string(this.payload)}});s.set(46,N);const P=t(class{constructor(t,s,i){this.action=t,this.state=s,this.duration=i,this._id=47}encode(t){t.uint(47),t.string(this.action),t.string(this.state),t.uint(this.duration)}});s.set(47,P);const q=t(class{constructor(t,s,i,n){this.operationKind=t,this.operationName=s,this.variables=i,this.response=n,this._id=48}encode(t){t.uint(48),t.string(this.operationKind),t.string(this.operationName),t.string(this.variables),t.string(this.response)}});s.set(48,q);const B=t(class{constructor(t,s,i,n){this.frames=t,this.ticks=s,this.totalJSHeapSize=i,this.usedJSHeapSize=n,this._id=49}encode(t){t.uint(49),t.int(this.frames),t.int(this.ticks),t.uint(this.totalJSHeapSize),t.uint(this.usedJSHeapSize)}});s.set(49,B);const H=t(class{constructor(t,s,i,n,e,h,o,r){this.timestamp=t,this.duration=s,this.ttfb=i,this.headerSize=n,this.encodedBodySize=e,this.decodedBodySize=h,this.url=o,this.initiator=r,this._id=53}encode(t){t.uint(53),t.uint(this.timestamp),t.uint(this.duration),t.uint(this.ttfb),t.uint(this.headerSize),t.uint(this.encodedBodySize),t.uint(this.decodedBodySize),t.string(this.url),t.string(this.initiator)}});s.set(53,H);const J=t(class{constructor(t,s){this.downlink=t,this.type=s,this._id=54}encode(t){t.uint(54),t.uint(this.downlink),t.string(this.type)}});s.set(54,J);const K=t(class{constructor(t){this.hidden=t,this._id=55}encode(t){t.uint(55),t.boolean(this.hidden)}});s.set(55,K);const O=t(class{constructor(t,s,i,n,e,h,o){this.timestamp=t,this.duration=s,this.context=i,this.containerType=n,this.containerSrc=e,this.containerId=h,this.containerName=o,this._id=59}encode(t){t.uint(59),t.uint(this.timestamp),t.uint(this.duration),t.uint(this.context),t.uint(this.containerType),t.string(this.containerSrc),t.string(this.containerId),t.string(this.containerName)}});s.set(59,O);const W=t(class{constructor(t,s,i,n){this.id=t,this.name=s,this.value=i,this.baseURL=n,this._id=60}encode(t){t.uint(60),t.uint(this.id),t.string(this.name),t.string(this.value),t.string(this.baseURL)}});s.set(60,W);const j=t(class{constructor(t,s,i){this.id=t,this.data=s,this.baseURL=i,this._id=61}encode(t){t.uint(61),t.uint(this.id),t.string(this.data),t.string(this.baseURL)}});s.set(61,j);const F=t(class{constructor(t,s){this.type=t,this.value=s,this._id=63}encode(t){t.uint(63),t.string(this.type),t.string(this.value)}});s.set(63,F);const G=t(class{constructor(t,s){this.name=t,this.payload=s,this._id=64}encode(t){t.uint(64),t.string(this.name),t.string(this.payload)}});s.set(64,G);const Q=t(class{constructor(){this._id=65}encode(t){t.uint(65)}});s.set(65,Q);const V="function"==typeof TextEncoder?new TextEncoder:{encode(t){const s=t.length,i=new Uint8Array(3*s);let n=-1;for(var e=0,h=0,o=0;o!==s;){if(e=t.charCodeAt(o),o+=1,e>=55296&&e<=56319){if(o===s){i[n+=1]=239,i[n+=1]=191,i[n+=1]=189;break}if(!((h=t.charCodeAt(o))>=56320&&h<=57343)){i[n+=1]=239,i[n+=1]=191,i[n+=1]=189;continue}if(o+=1,(e=1024*(e-55296)+h-56320+65536)>65535){i[n+=1]=240|e>>>18,i[n+=1]=128|e>>>12&63,i[n+=1]=128|e>>>6&63,i[n+=1]=128|63&e;continue}}e<=127?i[n+=1]=0|e:e<=2047?(i[n+=1]=192|e>>>6,i[n+=1]=128|63&e):(i[n+=1]=224|e>>>12,i[n+=1]=128|e>>>6&63,i[n+=1]=128|63&e)}return i.subarray(0,n+1)}};const X=new class{constructor(t){this.size=t,this.offset=0,this.data=new Uint8Array(t)}boolean(t){if(this.offset>=this.size)throw new RangeError;this.data[this.offset++]=+t}uint(t){for(;t>=128;)this.data[this.offset++]=t%256|128,t=Math.floor(t/128);if(this.offset>=this.size)throw new RangeError;this.data[this.offset++]=t}int(t){t=Math.round(t),this.uint(t>=0?2*t:-2*t-1)}string(t){const s=V.encode(t),i=s.byteLength;this.uint(i),this.data.set(s,this.offset),this.offset+=i}reset(){this.offset=0}flush(){const t=this.data.slice(0,this.offset);return this.offset=0,t}}(10485760);let Y=null,Z=0;self.onmessage=({data:t})=>{if(null===t&&null!==Y&&(Y.close(),Y=null),"string"==typeof t)return i=t,void(null===Y&&(Y=new WebSocket(i),Y.binaryType="arraybuffer",Y.onmessage=t=>self.postMessage(new Uint8Array(t.data)),Y.onclose=()=>{X.reset(),null!==Y&&(Y=null,self.postMessage(null))},Y.onerror=function(){this.close()},Z=0));var i;if(null===Y||Y.readyState!==WebSocket.OPEN)return void self.postMessage(null);X.boolean(!1),t.forEach(t=>{const i=new(s.get(t._id));Object.assign(i,t),i.encode(X)});const n=X.flush();n[0]=Z++,Y.send(n)};\n'],{type:"text/javascript"}))),this.worker.onerror=function(t){r.send(new at("webworker_error",JSON.stringify(t)))},this.worker.onmessage=function(t){var e=t.data;if(null===e){r.isWorkerActive=!1,3===r.socketFailedAttempts&&sessionStorage.removeItem(r.options.session_sid),sessionStorage.getItem(r.options.session_sid)&&r.socketFailedAttempts<3||3===r.socketFailedAttempts?(r.socketFailedAttempts++,r.stop(),document.hidden?document.addEventListener("visibilitychange",function t(){document.hidden||(document.removeEventListener("visibilitychange",t),r.start())}):setTimeout(function(){return r.start()},1e3)):(r.socketFailedAttempts=0,r.stop())}else{r.isWorkerActive=!0;var n=JSON.parse(String.fromCharCode.apply(null,e)),i=n.sessionID,s=n.userUUID;if("string"!=typeof i||"string"!=typeof s)return void r.stop();r.socketFailedAttempts=0,sessionStorage.setItem(r.options.session_sid,i),localStorage.setItem(r.options.local_uuid,s),-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")&&window.addEventListener("beforeunload",function(){r.send(new ct,!0)}),"function"==typeof r.options.onStart&&r.options.onStart({sessionID:i,userUUID:s}),r.options.__is_snippet&&r.send(new at("is_snippet","true"))}}}catch(t){}}return o(i,[{key:"send",value:function(t,e){var n=1<arguments.length&&void 0!==e&&e;this.messages.push(t),n&&this.commit()}},{key:"commit",value:function(){this.worker&&this.isWorkerActive&&this.messages.length&&(this.messages.unshift(new n(B())),this.worker.postMessage(this.messages),this.messages.length=0)}},{key:"safe",value:function(i){var s=this;return function(){try{for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];i.apply(this,e)}catch(t){s.send(new at("error",JSON.stringify({time:B(),name:t.name,message:t.message,stack:t.stack})))}}}},{key:"attachStartCallback",value:function(t){this.startCallbacks.push(t)}},{key:"attachStopCallback",value:function(t){this.stopCallbacks.push(t)}},{key:"attachEventListener",value:function(t,e,n,i,s){var r=!(4<arguments.length&&void 0!==s)||s;3<arguments.length&&void 0!==i&&!i||(n=this.safe(n)),this.attachStartCallback(function(){return t.addEventListener(e,n,r)}),this.attachStopCallback(function(){return t.removeEventListener(e,n,r)})}},{key:"sessionID",value:function(){var t=sessionStorage.getItem(this.options.session_sid);if(null!==t)return t}},{key:"active",value:function(){return this.isActive}},{key:"start",value:function(){if(this.worker&&!this.isActive){this.isActive=!0;try{this.worker.postMessage(this.options.ws_url+btoa(JSON.stringify({sessionID:sessionStorage.getItem(this.options.session_sid),userUUID:localStorage.getItem(this.options.local_uuid),projectID:this.projectID,revID:this.revID,timestamp:B(),trackerVersion:this.version,deviceMemory:gt,jsHeapSizeLimit:yt}))),this.observer.observe(),this.startCallbacks.forEach(function(t){return t()}),this.ticker.start()}catch(t){this.stop()}}}},{key:"stop",value:function(){if(this.isActive)try{this.isWorkerActive=!1,this.worker&&this.worker.postMessage(null),this.observer.disconnect(),this.nodes.clear(),this.ticker.stop(),this.stopCallbacks.forEach(function(t){return t()})}finally{this.isActive=!1}}}]),i}();var wt=J&&"InstallTrigger"in window?function(t){return t.message+"\n"+t.stack}:function(t){return t.stack||t.message};function St(t){return void 0===t?"undefined":null===t?"null":t instanceof Error?wt(t):Array.isArray(t)?"Array(".concat(t.length,")"):t.toString()}function Et(t){if(void 0===t)return"undefined";if(null===t)return"null";if(t instanceof Error)return wt(t);if(Array.isArray(t)){var e=t.length,n=t.slice(0,10).map(St).join(", ");return"Array(".concat(e,")[").concat(n,"]")}if("object"!==a(t))return t.toString();var i=[],s=0;for(var r in t){if(10==++s)break;var o=t[r];i.push(r+": "+St(o))}return"{"+i.join(", ")+"}"}function _t(r){return"string"==typeof r[0]&&r.unshift(r.shift().replace(/%(o|s|f|d|i)/g,function(t,e){var n,i,s=r.shift();if(void 0===s)return t;switch(e){case"o":return Et(s);case"s":return St(s);case"f":return"number"!=typeof(i=s)?"NaN":i.toString();case"d":case"i":return"number"!=typeof(n=s)?"NaN":Math.floor(n).toString();default:return t}})),r.map(Et).join(" ")}var Nt=["log","info","warn","error"];function It(t,e){return t(e={exports:{}},e.exports),e.exports}var xt=It(function(t,e){t.exports=function(){function n(t){return!isNaN(parseFloat(t))&&isFinite(t)}function i(t){return t.charAt(0).toUpperCase()+t.substring(1)}function t(t){return function(){return this[t]}}var e=["isConstructor","isEval","isNative","isToplevel"],s=["columnNumber","lineNumber"],r=["fileName","functionName","source"],o=["args"],a=["evalOrigin"],u=e.concat(s,r,o,a);function d(t){if(!t)return;for(var e=0;e<u.length;e++){if(t[u[e]]!==undefined){this["set"+i(u[e])](t[u[e]])}}}d.prototype={getArgs:function(){return this.args},setArgs:function(t){if(Object.prototype.toString.call(t)!=="[object Array]"){throw new TypeError("Args must be an Array")}this.args=t},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(t){if(t instanceof d){this.evalOrigin=t}else if(t instanceof Object){this.evalOrigin=new d(t)}else{throw new TypeError("Eval Origin must be an Object or StackFrame")}},toString:function(){var t=this.getFileName()||"";var e=this.getLineNumber()||"";var n=this.getColumnNumber()||"";var i=this.getFunctionName()||"";if(this.getIsEval()){if(t){return"[eval] ("+t+":"+e+":"+n+")"}return"[eval]:"+e+":"+n}if(i){return i+" ("+t+":"+e+":"+n+")"}return t+":"+e+":"+n}},d.fromString=function t(e){var n=e.indexOf("(");var i=e.lastIndexOf(")");var s=e.substring(0,n);var r=e.substring(n+1,i).split(",");var o=e.substring(i+1);if(o.indexOf("@")===0){var a=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(o,"");var u=a[1];var c=a[2];var h=a[3]}return new d({functionName:s,args:r||undefined,fileName:u,lineNumber:c||undefined,columnNumber:h||undefined})};for(var c=0;c<e.length;c++){d.prototype["get"+i(e[c])]=t(e[c]);d.prototype["set"+i(e[c])]=function(e){return function(t){this[e]=Boolean(t)}}(e[c])}for(var h=0;h<s.length;h++){d.prototype["get"+i(s[h])]=t(s[h]);d.prototype["set"+i(s[h])]=function(e){return function(t){if(!n(t)){throw new TypeError(e+" must be a Number")}this[e]=Number(t)}}(s[h])}for(var l=0;l<r.length;l++){d.prototype["get"+i(r[l])]=t(r[l]);d.prototype["set"+i(r[l])]=function(e){return function(t){this[e]=String(t)}}(r[l])}return d}()}),Tt=It(function(t,e){t.exports=function(u){var i=/(^|@)\S+:\d+/,s=/^\s*at .*(\S+:\d+|\(native\))/m,r=/^(eval@)?(\[native code])?$/;return{parse:function t(e){if(typeof e.stacktrace!=="undefined"||typeof e["opera#sourceloc"]!=="undefined"){return this.parseOpera(e)}else if(e.stack&&e.stack.match(s)){return this.parseV8OrIE(e)}else if(e.stack){return this.parseFFOrSafari(e)}else{throw new Error("Cannot parse given Error object")}},extractLocation:function t(e){if(e.indexOf(":")===-1){return[e]}var n=/(.+?)(?::(\d+))?(?::(\d+))?$/;var i=n.exec(e.replace(/[()]/g,""));return[i[1],i[2]||undefined,i[3]||undefined]},parseV8OrIE:function t(e){var n=e.stack.split("\n").filter(function(t){return!!t.match(s)},this);return n.map(function(t){if(t.indexOf("(eval ")>-1){t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,"")}var e=t.replace(/^\s+/,"").replace(/\(eval code/g,"(");var n=e.match(/ (\((.+):(\d+):(\d+)\)$)/);e=n?e.replace(n[0],""):e;var i=e.split(/\s+/).slice(1);var s=this.extractLocation(n?n[1]:i.pop());var r=i.join(" ")||undefined;var o=["eval","<anonymous>"].indexOf(s[0])>-1?undefined:s[0];return new u({functionName:r,fileName:o,lineNumber:s[1],columnNumber:s[2],source:t})},this)},parseFFOrSafari:function t(e){var n=e.stack.split("\n").filter(function(t){return!t.match(r)},this);return n.map(function(t){if(t.indexOf(" > eval")>-1){t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")}if(t.indexOf("@")===-1&&t.indexOf(":")===-1){return new u({functionName:t})}else{var e=/((.*".+"[^@]*)?[^@]*)(?:@)/;var n=t.match(e);var i=n&&n[1]?n[1]:undefined;var s=this.extractLocation(t.replace(e,""));return new u({functionName:i,fileName:s[0],lineNumber:s[1],columnNumber:s[2],source:t})}},this)},parseOpera:function t(e){if(!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length){return this.parseOpera9(e)}else if(!e.stack){return this.parseOpera10(e)}else{return this.parseOpera11(e)}},parseOpera9:function t(e){var n=/Line (\d+).*script (?:in )?(\S+)/i;var i=e.message.split("\n");var s=[];for(var r=2,o=i.length;r<o;r+=2){var a=n.exec(i[r]);if(a){s.push(new u({fileName:a[2],lineNumber:a[1],source:i[r]}))}}return s},parseOpera10:function t(e){var n=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i;var i=e.stacktrace.split("\n");var s=[];for(var r=0,o=i.length;r<o;r+=2){var a=n.exec(i[r]);if(a){s.push(new u({functionName:a[3]||undefined,fileName:a[2],lineNumber:a[1],source:i[r]}))}}return s},parseOpera11:function t(e){var n=e.stack.split("\n").filter(function(t){return!!t.match(i)&&!t.match(/^Error created at/)},this);return n.map(function(t){var e=t.split("@");var n=this.extractLocation(e.pop());var i=e.shift()||"";var s=i.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||undefined;var r;if(i.match(/\(([^)]*)\)/)){r=i.replace(/^[^(]+\(([^)]*)\)$/,"$1")}var o=r===undefined||r==="[arguments not available]"?undefined:r.split(",");return new u({functionName:s,args:o,fileName:n[0],lineNumber:n[1],columnNumber:n[2],source:t})},this)}}}(xt)});function Lt(t){return[{columnNumber:t.colno,lineNumber:t.lineno,fileName:t.filename,functionName:"",source:""}]}function At(t,e){var n=e;try{n=Tt.parse(t)}catch(t){}return new T(t.name,t.message,JSON.stringify(n))}function Ct(t){if(t instanceof ErrorEvent){if(t.error instanceof Error)return At(t.error,Lt(t));var e=u(t.message.split(":"),2),n=e[0],i=e[1];return i||(n="Error",i=t.message),new T(n,i,JSON.stringify(Lt(t)))}return"PromiseRejectionEvent"in window&&t instanceof PromiseRejectionEvent?t.reason instanceof Error?At(t.reason,[]):new T("Unhandled Promise Rejection",String(t.reason),"[]"):null}function Ot(t){if(t instanceof HTMLInputElement){var e=t.type;return"text"===e||"password"===e||"email"===e||"search"===e||"number"===e||"range"===e}}function Dt(t){if(t instanceof HTMLInputElement){var e=t.type;return"checkbox"===e||"radio"===e}}var Mt=J&&"labels"in HTMLInputElement.prototype?function(t){for(var e=t;null!==(e=e.parentNode);)if("LABEL"===e.nodeName)return e;var n=t.labels;if(null!==n&&1===n.length)return n[0]}:function(t){for(var e=t;null!==(e=e.parentNode);)if("LABEL"===e.nodeName)return e;var n=t.id;if(n){var i=document.querySelectorAll('label[for="'+n+'"]');if(null!==i&&1===i.length)return i[0]}};function Rt(t){var e,n=t.getAttribute("data-asayer-label");return null===n&&(n=void 0===(e=Mt(t))?t.placeholder||t.name:e.innerText),l(n)}function jt(r,t){var o=Object.assign({obscureInputNumbers:!0,obscureInputEmails:!0,defaultInputMode:0},t);function a(t,e){var n=e.value,i=o.defaultInputMode;"password"===e.type||e.hasAttribute("data-asayer-hidden")?i=2:(e.hasAttribute("data-asayer-obscured")||0===i&&(o.obscureInputNumbers&&/\d\d\d\d/.test(n)||o.obscureInputEmails&&("email"===e.type||~n.indexOf("@"))))&&(i=1);var s=0;switch(i){case 2:s=-1,n="";break;case 1:s=n.length,n=""}r.send(new S(t,n,s))}var u=new Map,i=new Map,c=new Set;r.attachStopCallback(function(){u.clear(),i.clear(),c.clear()}),r.ticker.attach(function(){u.forEach(function(t,e){var n,i,s=r.nodes.getNode(e);Ot(s)?t!==s.value&&(u.set(e,s.value),c.has(e)||(c.add(e),n=e,""!==(i=Rt(s))&&r.send(new w(n,i))),a(e,s)):u.delete(e)}),i.forEach(function(t,e){var n=r.nodes.getNode(e);Dt(n)?t!==n.checked&&(i.set(e,n.checked),r.send(new E(e,n.checked))):i.delete(e)})}),r.ticker.attach(Set.prototype.clear,100,!1,c),r.nodes.attachNodeCallback(r.safe(function(t){var e=r.nodes.getID(t);if(void 0!==e)return Ot(t)?(u.set(e,t.value),void a(e,t)):Dt(t)?(i.set(e,t.checked),void r.send(new E(e,t.checked))):void 0}))}function Pt(t){return t instanceof Element?function(t){var e=t;for(;null!==e&&e!==document.documentElement;){if(e.hasAttribute("data-asayer-masked"))return null;e=e.parentElement}if(t instanceof SVGElement)for(var n=t.ownerSVGElement;null!==n;)n=(t=n).ownerSVGElement;e=t;for(;null!==e&&e!==document.documentElement;){var i=e.tagName.toUpperCase();if("LABEL"===i)return null;if("INPUT"===i)return e;if("BUTTON"===i||"A"===i||"LI"===i||null!=e.onclick||"button"===e.getAttribute("role")||null!==e.getAttribute("data-asayer-label"))return e;e=e.parentElement}return t===document.documentElement?null:t}(t):null}function zt(i){var e=-1,n=-1,s=!1,r=null,o=0;i.attachStopCallback(function(){s=!(n=e=-1),r=null});function a(){s&&(i.send(new _(e,n)),s=!1)}i.attachEventListener(document.documentElement,"mouseover",function(t){var e=Pt(t.target);e!==r&&(r=e,o=performance.now())}),i.attachEventListener(document,"mousemove",function(t){e=t.clientX,n=t.clientY,s=!0},!1),i.attachEventListener(document,"click",function(t){var e,n=Pt(t.target);(t.clientX||t.clientY)&&null!==n&&(void 0!==(e=i.nodes.getID(n))&&(a(),i.send(new N(e,r===n?Math.round(performance.now()-o):0,function(t){var e=t.getAttribute("data-asayer-label");if(null!==e)return e;var n=t.tagName.toUpperCase();return"INPUT"===n?Rt(t):"BUTTON"!==n&&"A"!==n&&"LI"!==n&&null==t.onclick&&"button"!==t.getAttribute("role")?"":l(t.innerText||"").slice(0,100)}(n)),!0)),r=null)}),i.ticker.attach(a,10)}function Ut(c,t){var e=Object.assign({captureResourceTimings:!0,capturePageLoadTimings:!0,capturePageRenderTimings:!0},t);"PerformanceObserver"in window||(e.captureResourceTimings=!1),e.captureResourceTimings||(e.capturePageLoadTimings=!1,e.capturePageRenderTimings=!1);var i=e.captureResourceTimings?{}:null;function n(t){t.duration<=0||!F(t.name)||(null!==i&&(i[t.name]=t.startTime+t.duration),c.send(new et(t.startTime+performance.timing.navigationStart,t.duration,t.responseStart&&t.startTime?t.responseStart-t.startTime:0,t.transferSize>t.encodedBodySize?t.transferSize-t.encodedBodySize:0,t.encodedBodySize||0,t.decodedBodySize||0,t.name,t.initiatorType)))}var s=e.captureResourceTimings?new PerformanceObserver(function(t){return t.getEntries().forEach(n)}):null;null!==s&&(performance.getEntriesByType("resource").forEach(n),s.observe({entryTypes:["resource"]}));var h,r,o,a,u,d,l=0,f=0;e.capturePageLoadTimings&&null!==s&&(h=!1,c.ticker.attach(function(){var t,e,n,i,s,r,o,a,u;h||(0!==l&&0!==f||performance.getEntriesByType("paint").forEach(function(t){var e=t.name,n=t.startTime;switch(e){case"first-paint":l=n;break;case"first-contentful-paint":f=n}}),(performance.timing.loadEventEnd||3e4<performance.now())&&(h=!0,e=(t=performance.timing).navigationStart,n=t.requestStart,i=t.responseStart,s=t.responseEnd,r=t.domContentLoadedEventStart,o=t.domContentLoadedEventEnd,a=t.loadEventStart,u=t.loadEventEnd,c.send(new I(n-e||0,i-e||0,s-e||0,r-e||0,o-e||0,a-e||0,u-e||0,l,f))))},30)),e.capturePageRenderTimings&&null!==s&&(a=o=r=0,u=null,d=!1,c.ticker.attach(function(){var t,e,n;d||(t=performance.now(),null!==i&&1e3<t-(r=Math.max.apply(null,Object.keys(i).map(function(t){return i[t]})))&&(u=function(t){for(var e=[],n=document.getElementsByTagName("*"),i=/url\(("[^"]*"|'[^']*'|[^)]*)\)/i,s=0;s<n.length;s++){var r,o,a,u,c,h,d,l,f,p=n[s],v="";p instanceof HTMLImageElement&&(v=p.currentSrc||p.src),v||(!(r=getComputedStyle(p).getPropertyValue("background-image"))||null!==(o=i.exec(r))&&((v=o[1]).startsWith('"')||v.startsWith("'"))&&(v=v.substr(1,v.length-2))),!v||void 0!==(a="data:image"===v.substr(0,10)?0:t[v])&&(u=p.getBoundingClientRect(),c=Math.max(u.top,0),h=Math.max(u.left,0),d=Math.min(u.bottom,window.innerHeight||document.documentElement&&document.documentElement.clientHeight||0),l=Math.min(u.right,window.innerWidth||document.documentElement&&document.documentElement.clientWidth||0),d<=c||l<=h||(f=(d-c)*(l-h),e.push({time:a,area:f})))}return e}(i),i=null),null!==a&&(50<t-a&&(o=t),a=5e3<t-o?null:t),(null!==u&&null===a||3e4<t)&&(d=!0,e=(i=null)===u?0:function(t,e){for(var n=Math.max(document.documentElement&&document.documentElement.clientWidth||0,window.innerWidth||0)*Math.max(document.documentElement&&document.documentElement.clientHeight||0,window.innerHeight||0)/10,i=n*t,s=0;s<e.length;s++){var r=e[s],o=r.time,a=r.area;n+=a,i+=a*(t<o?o:t)}return 0===n?0:i/n}(f||l,u),n=null===a?Math.max(o,f,performance.timing.domContentLoadedEventEnd-performance.timing.navigationStart||0):0,c.send(new x(e,r<f?f:r,n))))}))}var Ht=ht;var Bt=function(){function z(t){var e,n,i,s,o,a,u,r,c,h,d,l,f,p,v,m,g,y,b,k,w,S,E,_,N,I,x,T,L,A,C,O,D,M,R,j=this;function P(t){var e="",n="",i="",s="",r=t.attribution[0];null!=r&&(e=r.containerType,s=r.containerName,i=r.containerId,n=r.containerSrc),o.send(new st(t.startTime+performance.timing.navigationStart,t.duration,Math.max(a.indexOf(t.name),0),Math.max(u.indexOf(e),0),s,i,n))}U(this,z),this.app=null,this.handleError=function(t){t instanceof Error&&null!==j.app&&j.app.send(At(t,[]))},this.handleErrorEvent=function(t){var e;!(t instanceof ErrorEvent||"PromiseRejectionEvent"in window&&t instanceof PromiseRejectionEvent)||null===j.app||null!=(e=Ct(t))&&j.app.send(e)},J?null==(e=t)||"number"!=typeof e.projectID||"string"!=typeof e.sessionID&&null!=e.sessionID?console.error("Asayer: invalid options argument type. Please, check documentation on https://docs.asayer.io"):t.__allow_not_secure||"https:"===location.protocol?(n=t.respectDoNotTrack&&("1"==navigator.doNotTrack||"1"==window.doNotTrack),this.app=!n&&"Map"in window&&"Set"in window&&"MutationObserver"in window&&"performance"in window&&"timing"in performance&&"startsWith"in String.prototype&&"Blob"in window&&"Worker"in window?new kt(t.projectID,t.sessionID,t):null,null!==this.app?(D=this.app,void 0!==(R=navigator.connection||navigator.mozConnection||navigator.webkitConnection)&&((M=function(){return D.send(new nt(Math.round(1e3*R.downlink),R.type||"unknown"))})(),R.addEventListener("change",M)),x=this.app,T=t,O=Object.assign({consoleMethods:Nt,consoleThrottling:30},T),Array.isArray(O.consoleMethods)&&0!==O.consoleMethods.length&&(L=x.safe(function(t,e){return x.send(new X(t,_t(e)))}),C=function(){A=0},x.attachStartCallback(C),x.ticker.attach(C,33,!1),O.consoleMethods.forEach(function(i){var s;-1!==Nt.indexOf(i)?(s=console[i],console[i]=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];s.apply(this,e),A++>O.consoleThrottling||L(i,e)}):console.error("Asayer: unsupported console method ".concat(i))})),_=this.app,N=t,Object.assign({captureExceptions:!0},N).captureExceptions&&(I=function(t){var e=Ct(t);null!=e&&_.send(e)},_.attachEventListener(window,"unhandledrejection",I),_.attachEventListener(window,"error",I)),w=this.app,S=w.safe(function(){var t,e,n,i,s,r=w.nodes.getID(this);void 0!==r&&(t=this.src,e=this.complete,n=this.naturalWidth,i=this.naturalHeight,e&&(0===n&&0===i?null!=t&&F(t)&&w.send(new et(B(),0,0,0,0,0,t,"img")):t.length<1e5&&(s=location.origin+location.pathname,w.send(new rt(r,"src",t,s)))))}),E=new MutationObserver(function(t){var e,n=H(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;if("attributes"===i.type&&"src"===i.attributeName){var s=i.target,r=w.nodes.getID(s);if(void 0===r)return;var o=s.src,a=location.origin+location.pathname;w.send(new rt(r,"src",o,a))}}}catch(t){n.e(t)}finally{n.f()}}),w.nodes.attachNodeCallback(function(t){t instanceof HTMLImageElement&&(w.nodes.attachElementListener("error",t,S),w.nodes.attachElementListener("load",t,S),S.call(t),E.observe(t,{attributes:!0}))}),jt(this.app,t),zt(this.app),Ut(this.app,t),bt(this.app),m=this.app,g=!1,y=new Map,b=m.safe(function(){return m.send(new V(window.pageXOffset||document.documentElement&&document.documentElement.scrollLeft||document.body&&document.body.scrollLeft||0,window.pageYOffset||document.documentElement&&document.documentElement.scrollTop||document.body&&document.body.scrollTop||0))}),k=m.safe(function(t,e){var n=m.nodes.getID(e);void 0!==n&&m.send(new q(n,t[0],t[1]))}),m.attachStartCallback(b),m.attachStopCallback(function(){g=!1,y.clear()}),m.attachEventListener(window,"scroll",function(t){var e=t.target;e!==document?e instanceof Element&&y.set(e,[e.scrollLeft,e.scrollTop]):g=!0}),m.ticker.attach(function(){g&&(b(),g=!1),y.forEach(k),y.clear()},5,!1),r=this.app,l=performance.timing.navigationStart,f=r.safe(function(){var t=document.URL;t!==c&&(c=t,r.send(new W(c,document.referrer,l)),l=0)}),p=r.safe(function(){var t=window,e=t.innerWidth,n=t.innerHeight;e===h&&n===d||(h=e,d=n,r.send(new Y(h,d)))}),v=void 0===document.hidden?Function.prototype:r.safe(function(){return r.send(new it(document.hidden))}),r.attachStartCallback(function(){c="",h=d=-1,f(),p(),v()}),void 0!==document.hidden&&r.attachEventListener(document,"visibilitychange",v,!1,!1),r.ticker.attach(f,1,!1),r.ticker.attach(p,5,!1),o=this.app,"PerformanceObserver"in window&&"PerformanceLongTaskTiming"in window&&(a=["unknown","self","same-origin-ancestor","same-origin-descendant","same-origin","cross-origin-ancestor","cross-origin-descendant","cross-origin-unreachable","multiple-contexts"],u=["window","iframe","embed","object"],new PerformanceObserver(function(t){return t.getEntries().forEach(P)}).observe({entryTypes:["longtask"],buffered:!0})),window.__ASAYER__=window.__ASAYER__||this):(i=new XMLHttpRequest,s=t.__fallback_origin||"https://ingest.asayer.io",i.open("POST",s+"/v1/web/not-started"),i.send(JSON.stringify({trackerVersion:"5.6.6",projectID:t.projectID,doNotTrack:n})))):console.error("Asayer: Your website must be publicly accessible and running on SSL in order for Asayer to properly capture and replay the user session."):console.error("Asayer: you are trying to start Tracker on a node.js environment. If you want to use Asayer with SSR, please, use componentDidMount or useEffect API. Check documentation on https://docs.asayer.io")}return o(z,[{key:"use",value:function(t){return t(this.app)}},{key:"active",value:function(){return null!==this.app&&this.app.active()}},{key:"start",value:function(){null!==this.app&&this.app.start()}},{key:"stop",value:function(){null!==this.app&&this.app.stop()}},{key:"sessionID",value:function(){return null===this.app?null:this.app.sessionID()}},{key:"userID",value:function(t){"string"==typeof t&&null!==this.app&&this.app.send(new A(t))}},{key:"userAnonymousID",value:function(t){"string"==typeof t&&null!==this.app&&this.app.send(new C(t))}},{key:"metadata",value:function(t,e){"string"==typeof t&&"string"==typeof e&&null!==this.app&&this.app.send(new O(t,e))}},{key:"event",value:function(t,e,n){var i=2<arguments.length&&void 0!==n?n:"info";if("string"==typeof t&&null!==this.app){if("error"===i)return this.issue(t,e);if("info"===i){try{e=JSON.stringify(e)}catch(t){return}this.app.send(new L(t,e))}}}},{key:"issue",value:function(t,e){if("string"==typeof t&&null!==this.app){try{e=JSON.stringify(e)}catch(t){return}this.app.send(new ut(t,e))}}}]),z}();var Ft=window.asayer,Jt=Ft.shift(),Wt=Ft.shift(),Yt=Ft.shift(),Vt=window.asayer=new Bt({projectID:Jt,sessionID:Wt,obscureTextEmails:!!(1&Yt),obscureTextNumbers:!!(Yt>>1&1),logExceptions:!!(Yt>>2&1),obscureInputNumbers:!!(Yt>>3&1),obscureInputEmails:!!(Yt>>4&1),defaultInputMode:Yt>>5,__is_snippet:!0});Vt.use(function(r){var i,t,n,e;null!==r&&window.CSSStyleSheet&&(i=r.safe(function(t,e,n){var i="string"==typeof n?function(t){return r.send(Ht.CSSInsertRule(t,n,e))}:function(t){return r.send(Ht.CSSDeleteRule(t,e))};if(null==t.ownerNode)throw new Error("Owner Node not found");var s=r.nodes.getID(t.ownerNode);void 0!==s&&i(s)}),t=CSSStyleSheet.prototype,n=t.insertRule,e=t.deleteRule,CSSStyleSheet.prototype.insertRule=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return i(this,e,t),n.call(this,t,e)},CSSStyleSheet.prototype.deleteRule=function(t){return i(this,t),e.call(this,t)},r.nodes.attachNodeCallback(function(t){if(t instanceof HTMLStyleElement&&t.sheet instanceof CSSStyleSheet&&!(null!==t.textContent&&0<t.textContent.trim().length))for(var e=t.sheet.cssRules,n=0;n<e.length;n++)i(t.sheet,n,e[n].cssText)}))});var qt=Vt.userID.bind(Vt);Vt.userID=function(t){void 0!==a(t)&&null!==t&&qt(t.toString())};var Xt=Vt.userAnonymousID.bind(Vt);Vt.userAnonymousID=function(t){void 0!==a(t)&&null!==t&&Xt(t.toString())};var $t=Vt.metadata.bind(Vt);Vt.metadata=function(t,e){"number"==typeof e&&NaN!==e&&(e=e.toString()),"string"==typeof t&&"string"==typeof e&&$t(t,e)};var Gt=Vt.event.bind(Vt);for(Vt.event=function(t,e){"string"==typeof t&&Gt(t,e)};Ft.length;){var Kt=Ft.shift();switch(Kt[0]){case 0:Vt.start();break;case 1:Vt.stop();break;case 2:Vt.userID(Kt[1]);break;case 3:Vt.userAnonymousID(Kt[1]);break;case 4:Vt.metadata(Kt[1],Kt[2]);break;case 5:Vt.event(Kt[1],Kt[2])}}}();